<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/previews/PR44/'</script><script charset="utf-8" src="../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>DustExtinction.jl ¬∑ DustExtinction.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script data-main="assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><link href="https://JuliaAstro.github.io/previews/PR44/DustExtinction/stable/" rel="canonical"/><link href="../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><a class="brand" href="../.."><img alt="home" src="../../assets/logo.svg"/></a><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../docs/">Home</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Data I/O</button><ul class="nav-dropdown-container"><a class="nav-link nav-item" href="../../AstroImages/">AstroImages - Load, manipulate, and visualize astronomical images</a><a class="nav-link nav-item" href="../../CFITSIO/">CFITSIO - Reading and writing FITS files</a><a class="nav-link nav-item" href="../../FITSIO/">FITSIO - Reading and writing FITS files</a><a class="nav-link nav-item" href="https://eschnett.github.io/ASDF2.jl/dev/" target="_blank">eschnett/ASDF2 - Load files in ASDF format, which is the upcoming stadnard for STScI/Roman</a><a class="nav-link nav-item" href="https://github.com/torrance/Casacore.jl?tab=readme-ov-file#casacorejl" target="_blank">torrance/Casacore - A high level Julia interface to Casacore</a><a class="nav-link nav-item" href="https://aplavin.github.io/Difmap.jl/test/examples.html" target="_blank">JuliaAPlavin/Difmap - Wrapper for the Difmap program used in synthesis imaging</a><a class="nav-link nav-item" href="https://emmt.github.io/EasyFITS.jl/dev" target="_blank">emmt/EasyFITS - Using FITS files made easier for Julia</a><a class="nav-link nav-item" href="https://github.com/emmt/OIFITS.jl?tab=readme-ov-file#support-for-oi-fits-data-in-julia" target="_blank">emmt/OIFITS - Support for OI-FITS</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/VirtualObservatory.jl?tab=readme-ov-file#virtualobservatoryjl" target="_blank">JuliaAPlavin/VirtualObservatory - Access remote data and services that follow Virtual Observatory (VO, &lt;https://www.ivoa.net/&gt;) protocols.</a><a class="nav-link nav-item" href="https://aplavin.github.io/VLBIData.jl/test/examples.html" target="_blank">JuliaAPlavin/VLBIData - Work with data formats common in very long baseline interferometry (VLBI)</a></ul></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Images</button><ul class="nav-dropdown-container"><a class="nav-link nav-item" href="../../AstroImages/">AstroImages - Load, manipulate, and visualize astronomical images</a><a class="nav-link nav-item" href="../../CCDReduction/">CCDReduction - Common CCD image processing routines</a><a class="nav-link nav-item" href="../../LACosmic/">LACosmic - Cosmic-ray rejection by Laplacian edge detection</a><a class="nav-link nav-item" href="../../Photometry/">Photometry - Aperture photometry</a><a class="nav-link nav-item" href="../../PSFModels/">PSFModels - Analytical, allocation-free point-spread-functions (PSF)</a><a class="nav-link nav-item" href="https://github.com/JuliaAstro/Reproject.jl?tab=readme-ov-file#reproject" target="_blank">Reproject - Astronomical image reprojection</a><a class="nav-link nav-item" href="../../SAOImageDS9/">SAOImageDS9 - Interface with the DS9 image viewer</a><a class="nav-link nav-item" href="http://JuliaHCI.github.io/ADI.jl/stable/" target="_blank">JuliaHCI/ADI - Angular Differential Imaging (ADI) routines in Julia</a><a class="nav-link nav-item" href="http://JuliaHCI.github.io/HCIToolbox.jl/stable/" target="_blank">JuliaHCI/HCIToolbox - Common utilities for high-contrast imaging (HCI) processing</a></ul></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Time, Coords, Units</button><ul class="nav-dropdown-container"><a class="nav-link nav-item" href="../../AstroAngles/">AstroAngles - String parsing and representation of angles</a><a class="nav-link nav-item" href="../../AstroTime/">AstroTime - Astronomical time keeping</a><a class="nav-link nav-item" href="https://github.com/JuliaAstro/ERFA.jl?tab=readme-ov-file#erfajl" target="_blank">ERFA - Time systems conversions</a><a class="nav-link nav-item" href="../../SkyCoords/">SkyCoords - Astronomical coordinate systems</a><a class="nav-link nav-item" href="../../SPICE/">SPICE - SPICE data retrieval and usage</a><a class="nav-link nav-item" href="../../UnitfulAstro/">UnitfulAstro - Astronomical units</a><a class="nav-link nav-item" href="../../WCS/">WCS - World Coordinate System transformations</a></ul></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Orbits</button><ul class="nav-dropdown-container"><a class="nav-link nav-item" href="../../EarthOrientation/">EarthOrientation - Earth orientation parameters</a><a class="nav-link nav-item" href="../../Transits/">Transits - Flexible photometric transit curves with limb darkening</a><a class="nav-link nav-item" href="https://juliaastro.org/EphemerisSources.jl/docs" target="_blank">EphemerisSources - Meta package for accessing JPL HORIZONS and SPICE sources</a><a class="nav-link nav-item" href="https://barrettp.github.io/Astrometry/dev" target="_blank">barrettp/Astrometry - Set of IAU standard algorithms for calculating the time and position of celestial objects</a><a class="nav-link nav-item" href="https://github.com/PerezHz/HORIZONS.jl?tab=readme-ov-file#horizonsjl" target="_blank">PerezHz/HORIZONS - An interface to NASA-JPL HORIZONS system and other Solar System Dynamics APIs in Julia</a><a class="nav-link nav-item" href="https://sefffal.github.io/PlanetOrbits.jl/dev/" target="_blank">sefffal/PlanetOrbits - Tools for displaying and solving Keplerian orbits in the context of direct imaging</a></ul></div><div class="nav-dropdown"><button class="nav-item dropdown-label">General</button><ul class="nav-dropdown-container"><a class="nav-link nav-item" href="../../AstroLib/">AstroLib - Collection of generic astronomical and astrophysical functions</a><a class="nav-link nav-item" href="../../BoxLeastSquares/">BoxLeastSquares - Compute box-least-squares periodogram</a><a class="nav-link nav-item" href="../../Cosmology/">Cosmology - Distances in the universe</a><a class="nav-link active nav-item" href="../">DustExtinction - Dust extinction laws and maps</a><a class="nav-link nav-item" href="../../LombScargle/">LombScargle - Compute Lomb-Scargle periodogram</a><a class="nav-link nav-item" href="../../Photometry/">Photometry - Aperture photometry</a><a class="nav-link nav-item" href="http://mileslucas.com/BiweightStats.jl/stable/" target="_blank">mileslucas/BiweightStats - Robust statistics based on the biweight transform</a><a class="nav-link nav-item" href="https://ziotom78.github.io/Healpix.jl/stable/" target="_blank">ziotom78/Healpix - Implementation of Healpix spherical tesselation scheme in pure Julia</a><a class="nav-link nav-item" href="https://ajwheeler.github.io/Korg.jl/stable/" target="_blank">ajwheeler/Korg - Theoretical stellar spectra from 1D model atmospheres and linelists, assuming LTE</a><a class="nav-link nav-item" href="https://manuelbehrendt.github.io/Mera.jl/stable/" target="_blank">ManuelBehrendt/Mera - Working with large hydrodynamical simulation data</a><a class="nav-link nav-item" href="https://fabienbaron.github.io/OITOOLS.jl/dev" target="_blank">fabienbaron/OITOOLS - A collection of tools to load, visualize, model-fit and image optical interferometry data coming from CHARA, NPOI and VLTI</a><a class="nav-link nav-item" href="https://sefffal.github.io/PairPlots.jl/dev/" target="_blank">sefffal/PairPlots - Beautiful and flexible visualizations of high dimensional data</a><a class="nav-link nav-item" href="https://juliaspace.github.io/SatelliteToolbox.jl/stable/" target="_blank">JuliaSpace/SatelliteToolbox - Perform analysis and build simulations related to satellites</a></ul></div><div class="search nav-item"><input id="search-input" placeholder="Search everywhere..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav class="toc"><h1>DustExtinction.jl</h1><select id="version-selector" onchange="window.location.href=this.value" style="visibility: hidden"></select><form action="search/" class="search" id="search-form"><input id="search-query" name="q" placeholder="Search docs" type="text"/></form><ul><li class="current"><a class="toctext" href="">DustExtinction.jl</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Usage-1">Usage</a></li><li><a class="toctext" href="#Reference/API-1">Reference/API</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="">DustExtinction.jl</a></li></ul><a class="edit-page" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/master/docs/src/index.md"><span class="fa">ÔÇõ</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>DustExtinction.jl</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" href="#DustExtinction.jl-1" id="DustExtinction.jl-1">DustExtinction.jl</a></h1><ul><li><a href="#DustExtinction.jl-1">DustExtinction.jl</a></li><ul><li><a href="#Installation-1">Installation</a></li><li><a href="#Usage-1">Usage</a></li><li><a href="#Reference/API-1">Reference/API</a></li></ul></ul><h2><a class="nav-anchor" href="#Installation-1" id="Installation-1">Installation</a></h2><p>From the REPL, press <code>]</code> to enter Pkg mode</p><pre><code class="language-none">(v 1.1) pkg&gt; add DustExtinction
[...]

julia&gt; using DustExtinction</code></pre><h2><a class="nav-anchor" href="#Usage-1" id="Usage-1">Usage</a></h2><pre><code class="language-julia-repl">julia&gt; using DustExtinction
</code></pre><h3><a class="nav-anchor" href="#Color-laws-1" id="Color-laws-1">Color laws</a></h3><pre><code class="language-julia-repl">julia&gt; ccm89(4000., 3.1)
1.4645557029425842</code></pre><p>These laws can be applied across higher dimension arrays using the <code>.</code> operator</p><pre><code class="language-julia-repl">julia&gt; ccm89.([4000., 5000.], 3.1)
2-element Array{Float64,1}:
 1.4645557029425842
 1.122246878899302
</code></pre><p>If you want to apply total extinction <span>$A_V$</span> it's as simple as multiplcation</p><pre><code class="language-julia-repl">julia&gt; a_v=0.3
0.3

julia&gt; a_v * ccm89(4000., 3.1)
0.43936671088277524</code></pre><h3><a class="nav-anchor" href="#Advanced-Examples-1" id="Advanced-Examples-1">Advanced Examples</a></h3><p>The color laws also have built-in support for uncertainties using <a href="https://github.com/juliaphysics/measurements.jl">Measurements.jl</a>.</p><pre><code class="language-julia-repl">julia&gt; using Measurements

julia&gt; ccm89.([4000. ¬± 10.5, 5000. ¬± 10.2], 3.1)
2-element Array{Measurement{Float64},1}:
 1.4646 ¬± 0.0033
 1.1222 ¬± 0.003
</code></pre><p>and also support units via <a href="https://github.com/painterqubits/unitful.jl">Unitful.jl</a> and its subsidiaries. </p><pre><code class="language-julia-repl">julia&gt; using Unitful, UnitfulAstro

julia&gt; mags = ccm89.([4000u"angstrom", 0.5u"Œºm"], 3.1)
2-element Array{Gain{Unitful.LogInfo{:Magnitude,10,-2.5},:?,Float64},1}:
 1.4645557029425837 mag
  1.122246878899302 mag

julia&gt; fluxes = ones(2)u"erg/s/cm^2"
2-element Array{Quantity{Float64,ùêå*ùêì^-3,Unitful.FreeUnits{(erg, cm^-2, s^-1),ùêå*ùêì^-3,nothing}},1}:
 1.0 erg cm^-2 s^-1
 1.0 erg cm^-2 s^-1

julia&gt; reddened = fluxes .* mags
2-element Array{Quantity{Float64,ùêå*ùêì^-3,Unitful.FreeUnits{(erg, cm^-2, s^-1),ùêå*ùêì^-3,nothing}},1}:
  0.2595241150526157 erg cm^-2 s^-1
 0.35571423768348603 erg cm^-2 s^-1

julia&gt; reddened ‚âà @. fluxes * 10 ^ (-0.4 * ustrip(mags))
true
</code></pre><p>You can even combine the two above to get some really nice workflows exploiting all Julia has to offer! This example would shows how you  could redden some OIR observational data with uncertainties in the flux density.</p><pre><code class="language-julia-repl">julia&gt; using Random, Measurements, Unitful, UnitfulAstro

julia&gt; wave = range(0.3, 1.0, length=5)u"Œºm"
0.3 Œºm:0.175 Œºm:1.0 Œºm

julia&gt; err = randn(MersenneTwister(0), length(wave))u"erg/s/cm^2"
5-element Array{Quantity{Float64,ùêå*ùêì^-3,Unitful.FreeUnits{(erg, cm^-2, s^-1),ùêå*ùêì^-3,nothing}},1}:
   0.6791074260357777 erg cm^-2 s^-1
   0.8284134829000359 erg cm^-2 s^-1
  -0.3530074003005963 erg cm^-2 s^-1
 -0.13485387193052173 erg cm^-2 s^-1
   0.5866170746331097 erg cm^-2 s^-1

julia&gt; flux = @.(ustrip(u"erg/s/cm^2", 300u"erg/s*cm^2" / wave^4) ¬± ustrip(err))u"erg/s/cm^2"
5-element Array{Quantity{Measurement{Float64},ùêå*ùêì^-3,Unitful.FreeUnits{(erg, cm^-2, s^-1),ùêå*ùêì^-3,nothing}},1}:
  3.7037037037037034e20 ¬± 0.68 erg cm^-2 s^-1
   5.893140783143162e19 ¬± 0.83 erg cm^-2 s^-1
 1.6806134238997232e19 ¬± -0.35 erg cm^-2 s^-1
  6.475979428646598e18 ¬± -0.13 erg cm^-2 s^-1
                 3.0e18 ¬± 0.59 erg cm^-2 s^-1

julia&gt; Œª_m = @. 0.25 * ccm89(wave, 3.1)
5-element Array{Gain{Unitful.LogInfo{:Magnitude,10,-2.5},:?,Float64},1}:
  0.4545391743613166 mag
  0.3000686820198816 mag
  0.2068677378008488 mag
 0.14069431885378056 mag
 0.10099999999999998 mag

julia&gt; flux .* Œª_m
5-element Array{Quantity{Measurement{Float64},ùêå*ùêì^-3,Unitful.FreeUnits{(erg, cm^-2, s^-1),ùêå*ùêì^-3,nothing}},1}:
 2.4368038160281967e20 ¬± 0.45 erg cm^-2 s^-1
  4.470121662545148e19 ¬± 0.63 erg cm^-2 s^-1
  1.389059128986988e19 ¬± 0.29 erg cm^-2 s^-1
  5.688892575540536e18 ¬± 0.12 erg cm^-2 s^-1
  2.733513699128758e18 ¬± 0.53 erg cm^-2 s^-1
</code></pre><h3><a class="nav-anchor" href="#Dust-maps-1" id="Dust-maps-1">Dust maps</a></h3><pre><code class="language-julia">julia&gt; ENV["SFD98_DIR"] = "/home/user/data/dust"

# download maps (once)
julia&gt; download_sfd98()

julia&gt; dustmap = SFD98Map()
SFD98Map("/home/user/data/dust")

julia&gt; ebv_galactic(dustmap, 0.1, 0.1)
0.793093095733043

julia&gt; ebv_galactic(dustmap, [0.1, 0.2], [0.1, 0.2])
2-element Array{Float64,1}:
 0.793093
 0.539507</code></pre><h2><a class="nav-anchor" href="#Reference/API-1" id="Reference/API-1">Reference/API</a></h2><h3><a class="nav-anchor" href="#Extinction-Laws-1" id="Extinction-Laws-1">Extinction Laws</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.ccm89" id="DustExtinction.ccm89"><code>DustExtinction.ccm89</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">ccm89(wave::Real, r_v::Real=3.1)
ccm89(wave::Quantity, r_v::Real=3.1)</code></pre><p>Clayton, Cardelli and Mathis (1989) dust law. </p><p>Returns the extinction in magnitudes at the given wavelength(s) <code>wave</code> (in Angstroms), relative to the extinction at 5494.5 Angstroms. The parameter <code>r_v</code> changes the shape of the function.  A typical value for the Milky Way is 3.1. An error is raised for wavelength values outside the range of support, 1000. to 33333.33 Angstroms.</p><p><strong>References</strong></p><p><a href="http://ui.adsabs.harvard.edu/abs/1989ApJ...345..245C">[1]</a> Cardelli, Clayton and Mathis (1989)</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/ccm89.jl#L55-L70" target="_blank">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.od94" id="DustExtinction.od94"><code>DustExtinction.od94</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">od94(wave::Real, r_v::Real=3.1)
od94(wave::Quantity, r_v::Real=3.1)</code></pre><p>O'Donnell (1994) dust law.</p><p>This is identical to the Clayton, Cardelli and Mathis (1989) dust law, except that different coefficients are used in the optical (3030.3 to 9090.9 Angstroms). Returns the extinction in magnitudes at the given wavelength(s) <code>wave</code> (in Angstroms), relative to the extinction at 5494.5 Angstroms. The parameter <code>r_v</code> changes the shape of the function.  A typical value for the Milky Way is 3.1.  An error is raised for wavelength values outside the range of support, 1000. to 33333.33 Angstroms.</p><p><strong>References</strong></p><p><a href="http://ui.adsabs.harvard.edu/abs/1994ApJ...422..158O">[1]</a> O'Donnell (1994)</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/ccm89.jl#L78-L95" target="_blank">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.cal00" id="DustExtinction.cal00"><code>DustExtinction.cal00</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">cal00(wave::Real, r_v::Real=3.1)
cal00(wave::Quantity, r_v::Real=3.1)</code></pre><p>Calzetti et al. (2000) Dust law.</p><p>Calculate the magnitudes for given wavelengths <code>wave</code> in Angstrom. Wavelength support is 0.12 to 2.2 microns (error will be thrown if out of this range). Accepts selective extinction <code>r_v</code> parameter with default set to Milky Way average of 3.1.</p><p><strong>References</strong></p><p><a href="http://ui.adsabs.harvard.edu/abs/2000ApJ...533..682C">[1]</a> Calzetti et al. (2000)</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/cal00.jl#L19-L30" target="_blank">source</a></section><h3><a class="nav-anchor" href="#Dust-Maps-1" id="Dust-Maps-1">Dust Maps</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.download_sfd98" id="DustExtinction.download_sfd98"><code>DustExtinction.download_sfd98</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">download_sfd98([destdir])</code></pre><p>Download the Schlegel, Finkbeiner and Davis (1998) dust maps to the given directory. If the directory is ommitted, the <code>SFD98_DIR</code> environment variable is used as the destination directory.</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/SFD98Map.jl#L14-L20" target="_blank">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.SFD98Map" id="DustExtinction.SFD98Map"><code>DustExtinction.SFD98Map</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">SFD98Map([mapdir])</code></pre><p>Schlegel, Finkbeiner and Davis (1998) dust map. <code>mapdir</code> should be a directory containing the two FITS files defining the map, <code>SFD_dust_4096_[ngp,sgp].fits</code>. If <code>mapdir</code> is omitted, the <code>SFD98_DIR</code> environment variable is used. Internally, this type keeps the FITS files defining the map open, speeding up repeated queries for E(B-V) values.</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/SFD98Map.jl#L52-L61" target="_blank">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" href="#DustExtinction.ebv_galactic" id="DustExtinction.ebv_galactic"><code>DustExtinction.ebv_galactic</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">ebv_galactic(dustmap::SFD98Map, l::Real, b::Real)
ebv_galactic(dustmap::SFD98Map, l::Vector{&lt;:Real}, b::Vector{&lt;:Real})</code></pre><p>Get E(B-V) value from a <code>SFD98Map</code> instance at galactic coordinates (<code>l</code>, <code>b</code>), given in radians. <code>l</code> and <code>b</code> may be Vectors. Uses bilinear interpolation between pixel values.</p></div></div><a class="source-link" href="https://github.com/JuliaAstro/DustExtinction.jl/blob/0b7261234717d2121d4d597513088689b07859db/src/SFD98Map.jl#L94-L101" target="_blank">source</a></section><footer><hr/></footer></article></body></HTML>