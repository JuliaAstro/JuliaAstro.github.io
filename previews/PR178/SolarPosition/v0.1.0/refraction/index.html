<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Refraction Correction · SolarPosition.jl</title><meta content="Refraction Correction · SolarPosition.jl" name="title"/><meta content="Refraction Correction · SolarPosition.jl" property="og:title"/><meta content="Refraction Correction · SolarPosition.jl" property="twitter:title"/><meta content="Documentation for SolarPosition.jl." name="description"/><meta content="Documentation for SolarPosition.jl." property="og:description"/><meta content="Documentation for SolarPosition.jl." property="twitter:description"/><meta content="https://JuliaAstro.github.io/SolarPosition.jl/refraction/" property="og:url"/><meta content="https://JuliaAstro.github.io/SolarPosition.jl/refraction/" property="twitter:url"/><link href="https://JuliaAstro.org/SolarPosition/stable/refraction/" rel="canonical"/><script data-outdated-warner="" src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="catppuccin-mocha" href="../assets/themes/catppuccin-mocha.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-macchiato" href="../assets/themes/catppuccin-macchiato.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-frappe" href="../assets/themes/catppuccin-frappe.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-latte" href="../assets/themes/catppuccin-latte.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><a class="brand" href="../../.."><img alt="home" src="../../../assets/logo.svg"/></a><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../../home/">Home</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Domain</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Solar System</div><ul class="column-content"><a class="nav-link nav-item" href="../../../CALCEPH/">⬤ CALCEPH</a><a class="nav-link nav-item" href="https://juliaastro.org/EphemerisSources.jl" target="_blank">⬤ EphemerisSources</a><a class="nav-link nav-item" href="https://juliaastro.org/GeneralAstrodynamics.jl" target="_blank">⬤ GeneralAstrodynamics</a><a class="nav-link nav-item" href="https://github.com/PerezHz/HORIZONS.jl?tab=readme-ov-file#horizonsjl" target="_blank">⬤ HORIZONS</a><a class="nav-link nav-item" href="https://juliaspace.github.io/SatelliteToolbox.jl/stable/" target="_blank">⬤ SatelliteToolbox</a><a class="nav-link active nav-item" href="../../">⬤ SolarPosition</a><a class="nav-link nav-item" href="../../../SPICE/">⬤ SPICE</a></ul></div><div class="nav-mega-column"><div class="column-header">Exoplanets</div><ul class="column-content"><a class="nav-link nav-item" href="http://JuliaHCI.github.io/ADI.jl/stable/" target="_blank">⬤ ADI</a><a class="nav-link nav-item" href="http://JuliaHCI.github.io/HCIToolbox.jl/stable/" target="_blank">⬤ HCIToolbox</a><a class="nav-link nav-item" href="../../../Orbits/">⬤ Orbits</a><a class="nav-link nav-item" href="https://sefffal.github.io/PlanetOrbits.jl/dev/" target="_blank">⬤ PlanetOrbits</a><a class="nav-link nav-item" href="../../../Transits/">⬤ Transits</a></ul></div><div class="nav-mega-column"><div class="column-header">Stars</div><ul class="column-content"><a class="nav-link nav-item" href="https://cgarling.github.io/BolometricCorrections.jl/stable/" target="_blank">⬤ BolometricCorrections</a><a class="nav-link nav-item" href="https://cgarling.github.io/InitialMassFunctions.jl/stable/" target="_blank">⬤ InitialMassFunctions</a><a class="nav-link nav-item" href="https://cgarling.github.io/StarFormationHistories.jl/stable/" target="_blank">⬤ StarFormationHistories</a></ul></div><div class="nav-mega-column"><div class="column-header">Galaxies and Cosmology</div><ul class="column-content"><a class="nav-link nav-item" href="../../../Cosmology/">⬤ Cosmology</a><a class="nav-link nav-item" href="../../../DustExtinction/">⬤ DustExtinction</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/ScatteringOptics.jl/stable/" target="_blank">⬤ ScatteringOptics</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Techniques</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Photometry</div><ul class="column-content"><a class="nav-link nav-item" href="../../../CCDReduction/">⬤ CCDReduction</a><a class="nav-link nav-item" href="../../../LACosmic/">⬤ LACosmic</a><a class="nav-link nav-item" href="../../../Photometry/">⬤ Photometry</a><a class="nav-link nav-item" href="../../../PSFModels/">⬤ PSFModels</a><a class="nav-link nav-item" href="../../../SAOImageDS9/">⬤ SAOImageDS9</a></ul></div><div class="nav-mega-column"><div class="column-header">Astrometry</div><ul class="column-content"><a class="nav-link nav-item" href="https://barrettp.github.io/Astrometry/dev" target="_blank">⬤ Astrometry</a><a class="nav-link nav-item" href="../../../AstroTime/">⬤ AstroTime</a><a class="nav-link nav-item" href="../../../EarthOrientation/">⬤ EarthOrientation</a><a class="nav-link nav-item" href="../../../ERFA/">◯ ERFA</a><a class="nav-link nav-item" href="../../../Healpix/">⬤ Healpix</a><a class="nav-link nav-item" href="../../../Reproject/">⬤ Reproject</a><a class="nav-link nav-item" href="../../../SkyCoords/">⬤ SkyCoords</a><a class="nav-link nav-item" href="../../../WCS/">◯ WCS</a></ul></div><div class="nav-mega-column"><div class="column-header">Spectroscopy</div><ul class="column-content"><a class="nav-link nav-item" href="https://ajwheeler.github.io/Korg.jl/stable/" target="_blank">⬤ Korg</a><a class="nav-link nav-item" href="../../../Spectra/">⬤ Spectra</a><a class="nav-link nav-item" href="https://fjebaker.github.io/SpectralFitting.jl/dev/" target="_blank">⬤ SpectralFitting</a></ul></div><div class="nav-mega-column"><div class="column-header">Time Series Analysis</div><ul class="column-content"><a class="nav-link nav-item" href="https://docs.juliadsp.org/stable/" target="_blank">⬤ DSP</a><a class="nav-link nav-item" href="../../../LombScargle/">⬤ LombScargle</a><a class="nav-link nav-item" href="https://juliastats.github.io/TimeSeries.jl/stable" target="_blank">⬤ TimeSeries</a></ul></div><div class="nav-mega-column"><div class="column-header">Interferometry</div><ul class="column-content"><a class="nav-link nav-item" href="https://ptiede.github.io/Comrade.jl/stable/" target="_blank">⬤ Comrade</a><a class="nav-link nav-item" href="https://aplavin.github.io/Difmap.jl/test/examples.html" target="_blank">⬤ Difmap</a><a class="nav-link nav-item" href="https://github.com/emmt/OIFITS.jl?tab=readme-ov-file#support-for-oi-fits-data-in-julia" target="_blank">⬤ OIFITS</a><a class="nav-link nav-item" href="https://fabienbaron.github.io/OITOOLS.jl/dev" target="_blank">⬤ OITOOLS</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/PolarizedTypes.jl/stable/" target="_blank">⬤ PolarizedTypes</a><a class="nav-link nav-item" href="https://aplavin.github.io/VLBIData.jl/test/examples.html" target="_blank">⬤ VLBIData</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/VLBISkyModels.jl/stable/" target="_blank">⬤ VLBISkyModels</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Statistics</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Uncertainty</div><ul class="column-content"><a class="nav-link nav-item" href="https://juliaphysics.github.io/Measurements.jl/stable/" target="_blank">⬤ Measurements</a><a class="nav-link nav-item" href="https://baggepinnen.github.io/MonteCarloMeasurements.jl/stable/" target="_blank">⬤ MonteCarloMeasurements</a><a class="nav-link nav-item" href="https://baggepinnen.github.io/MonteCarloMeasurements.jl/stable/" target="_blank">⬤ Uncertain</a></ul></div><div class="nav-mega-column"><div class="column-header">Optimization</div><ul class="column-content"><a class="nav-link nav-item" href="../../../BoxLeastSquares/">⬤ BoxLeastSquares</a><a class="nav-link nav-item" href="http://jump.dev/JuMP.jl/" target="_blank">⬤ JuMP</a><a class="nav-link nav-item" href="https://docs.sciml.ai/NonlinearSolve/stable/" target="_blank">⬤ NonlinearSolve</a><a class="nav-link nav-item" href="https://docs.sciml.ai/Optimization/stable/" target="_blank">⬤ Optimization</a></ul></div><div class="nav-mega-column"><div class="column-header">General</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroLib/">⬤ AstroLib</a><a class="nav-link nav-item" href="http://mileslucas.com/BiweightStats.jl/stable/" target="_blank">⬤ BiweightStats</a><a class="nav-link nav-item" href="https://github.com/jeff-regier/Celeste.jl/wiki/" target="_blank">⬤ Celeste</a><a class="nav-link nav-item" href="https://juliastats.org/" target="_blank">⬤ JuliaStats</a><a class="nav-link nav-item" href="https://juliastats.github.io/Distributions.jl/stable/" target="_blank">⬤ Distributions</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/FastHartleyTransform.jl/stable/" target="_blank">⬤ FastHartleyTransform</a><a class="nav-link nav-item" href="https://sefffal.github.io/Octofitter.jl/dev" target="_blank">⬤ Octofitter</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Utilities</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Data I/O</div><ul class="column-content"><a class="nav-link nav-item" href="../../../ASDF2/">⬤ ASDF2</a><a class="nav-link nav-item" href="../../../AstroImages/">⬤ AstroImages</a><a class="nav-link nav-item" href="../../../CFITSIO/">◯ CFITSIO</a><a class="nav-link nav-item" href="https://emmt.github.io/EasyFITS.jl/dev" target="_blank">⬤ EasyFITS</a><a class="nav-link nav-item" href="https://barrettp.github.io/FITSFiles.jl/" target="_blank">⬤ FITSFiles</a><a class="nav-link nav-item" href="../../../FITSIO/">◯ FITSIO</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/FixedWidthTables.jl?tab=readme-ov-file#fixedwidthtablesjl" target="_blank">⬤ FixedWidthTables</a><a class="nav-link nav-item" href="https://aplavin.github.io/SkyImages.jl/test/notebook.html" target="_blank">⬤ SkyImages</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/VirtualObservatory.jl?tab=readme-ov-file#virtualobservatoryjl" target="_blank">⬤ VirtualObservatory</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/VOTables.jl" target="_blank">⬤ VOTables</a><a class="nav-link nav-item" href="../../../XPA/">⬤ XPA</a></ul></div><div class="nav-mega-column"><div class="column-header">Data processing</div><ul class="column-content"><a class="nav-link nav-item" href="../../../Astroalign/">⬤ Astroalign</a><a class="nav-link nav-item" href="../../../BackgroundMeshes/">⬤ BackgroundMeshes</a><a class="nav-link nav-item" href="https://github.com/torrance/Casacore.jl?tab=readme-ov-file#casacorejl" target="_blank">⬤ Casacore</a><a class="nav-link nav-item" href="https://dataframes.juliadata.org/stable/" target="_blank">⬤ DataFrames</a><a class="nav-link nav-item" href="https://rafaqz.github.io/DimensionalData.jl/stable/" target="_blank">⬤ DimensionalData</a><a class="nav-link nav-item" href="https://aplavin.github.io/FlexiJoins.jl/test/examples.html" target="_blank">⬤ FlexiJoins</a><a class="nav-link nav-item" href="https://github.com/gcalderone/SortMerge.jl?tab=readme-ov-file#sortmerge" target="_blank">⬤ SortMerge</a></ul></div><div class="nav-mega-column"><div class="column-header">Data Viz</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroImages/">⬤ AstroImages</a><a class="nav-link nav-item" href="https://juliaimages.github.io/ImageFiltering.jl/stable" target="_blank">⬤ ImageFiltering</a><a class="nav-link nav-item" href="https://manuelbehrendt.github.io/Mera.jl/stable/" target="_blank">⬤ Mera</a><a class="nav-link nav-item" href="https://sefffal.github.io/PairPlots.jl/dev/" target="_blank">⬤ PairPlots</a><a class="nav-link nav-item" href="https://aplavin.github.io/SkyImages.jl/test/notebook.html" target="_blank">⬤ SkyImages</a></ul></div><div class="nav-mega-column"><div class="column-header">Units/Constants</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroAngles/">⬤ AstroAngles</a><a class="nav-link nav-item" href="https://symbolicml.org/DynamicQuantities.jl/stable/" target="_blank">⬤ DynamicQuantities</a><a class="nav-link nav-item" href="https://juliaphysics.github.io/PhysicalConstants.jl/stable/" target="_blank">⬤ PhysicalConstants</a><a class="nav-link nav-item" href="https://painterqubits.github.io/Unitful.jl/stable" target="_blank">⬤ Unitful</a><a class="nav-link nav-item" href="../../../UnitfulAstro/">⬤ UnitfulAstro</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search everywhere..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SolarPosition.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/getting-started/">Getting Started</a></li><li><a class="tocitem" href="../examples/plotting/">Plotting with Makie.jl</a></li></ul></li><li><a class="tocitem" href="../reference/">API reference</a></li><li><a class="tocitem" href="../positioning/">Solar Positioning</a></li><li class="is-active"><a class="tocitem" href="">Refraction Correction</a><ul class="internal"><li><a class="tocitem" href="#Default-refraction-model"><span>Default refraction model</span></a></li><li><a class="tocitem" href="#Comparison-of-Refraction-Models"><span>Comparison of Refraction Models</span></a></li><li><a class="tocitem" href="#hughes-refraction"><span>Hughes</span></a></li><li><a class="tocitem" href="#archer-refraction"><span>Archer</span></a></li><li><a class="tocitem" href="#bennett-refraction"><span>Bennett</span></a></li><li><a class="tocitem" href="#michalsky-refraction"><span>Michalsky</span></a></li><li><a class="tocitem" href="#sg2-refraction"><span>SG2</span></a></li><li><a class="tocitem" href="#spa-refraction"><span>SPARefraction</span></a></li></ul></li><li><a class="tocitem" href="../deltat/">Delta T (ΔT)</a></li><li><a class="tocitem" href="../literature/">Literature</a></li><li><a class="tocitem" href="../contributing/">Contributing guidelines</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="">Refraction Correction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Refraction Correction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAstro/SolarPosition.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/main/docs/src/refraction.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" href="javascript:;" id="documenter-article-toggle-button" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="refraction-correction"><a class="docs-heading-anchor" href="#refraction-correction">Refraction Correction</a><a id="refraction-correction-1"></a><a class="docs-heading-anchor-permalink" href="#refraction-correction" title="Permalink"></a></h1><p>Atmospheric refraction causes the apparent position of the sun to differ from its true geometric position. This effect is most pronounced near the horizon and can be corrected using various atmospheric models.</p><p>The correction formula for elevation is:</p><p class="math-container">\[e_{apparent} = e_{true} + R\]</p><p>Where:</p><ul><li><span>$e_{apparent}$</span> is the apparent solar elevation angle (degrees)</li><li><span>$e_{true}$</span> is the true solar elevation angle (degrees)</li><li><span>$R$</span> is the refraction correction (degrees), calculated based on the chosen refraction model</li></ul><p><img alt="Refraction correction comparison" src="../assets/atmospheric_refraction.png"/> Figure 1: Atmospheric refraction causes the sun to appear higher in the sky than its true position, especially near the horizon. Image source: <a href="../literature/#wikimedia_atmospheric_refraction">Wikimedia Commons</a>.</p><p><code>SolarPosition.jl</code> includes several refraction correction algorithms. Below is a summary of the available algorithms:</p><table><tbody><tr><th style="text-align: right">Algorithm</th><th style="text-align: right">Reference</th><th style="text-align: right">Atmospheric Parameters</th><th style="text-align: right">Status</th></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.HUGHES"><code>HUGHES</code></a></td><td style="text-align: right">[<a href="../literature/#Hug85">Hug85</a>]</td><td style="text-align: right">Pressure, Temperature</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.ARCHER"><code>ARCHER</code></a></td><td style="text-align: right">[<a href="../literature/#Arc80">ABO80</a>]</td><td style="text-align: right">None</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.BENNETT"><code>BENNETT</code></a></td><td style="text-align: right">[<a href="../literature/#Ben82">Ben82</a>]</td><td style="text-align: right">Pressure, Temperature</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.MICHALSKY"><code>MICHALSKY</code></a></td><td style="text-align: right">[<a href="../literature/#Mic88">Mic88</a>]</td><td style="text-align: right">None</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.SG2"><code>SG2</code></a></td><td style="text-align: right">[<a href="../literature/#BW12">BW12</a>]</td><td style="text-align: right">Pressure, Temperature</td><td style="text-align: right">✅</td></tr><tr><td style="text-align: right"><a href="#SolarPosition.Refraction.SPARefraction"><code>SPARefraction</code></a></td><td style="text-align: right">[<a href="../literature/#RA04">RA04</a>]</td><td style="text-align: right">Pressure, Temperature</td><td style="text-align: right">✅</td></tr></tbody></table><p>To calculate refraction, we can use the <a href="#SolarPosition.Refraction.refraction"><code>refraction</code></a> function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.refraction" id="SolarPosition.Refraction.refraction"><code>SolarPosition.Refraction.refraction</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">refraction(model::RefractionAlgorithm, elevation::T) where {T&lt;:AbstractFloat}</code></pre><p>Apply atmospheric refraction correction to the given elevation angle(s).</p><p><strong>Arguments</strong></p><ul><li><code>model::RefractionAlgorithm</code>: Refraction model to use (e.g., <code>HUGHES()</code>)</li><li><code>elevation::T</code>: True (unrefracted) solar elevation angle in degrees</li></ul><p><strong>Returns</strong></p><ul><li>Refraction correction in degrees to be added to the elevation angle</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using SolarPosition
hughes = HUGHES(101325.0, 15.0)  # 15°C temperature
elevation = 30.0  # 30 degrees
correction = refraction(hughes, elevation)
apparent_elevation = elevation + correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/Refraction.jl#L56-L76" target="_blank">source</a></section></article><p>This function is typically used internally by the <a href="../reference/#SolarPosition.Positioning.solar_position"><code>solar_position</code></a> function when a refraction algorithm is specified, but is also a publicly available method.</p><div class="admonition is-info" id="Info-2c360cc941e4520e"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-2c360cc941e4520e" title="Permalink"></a></header><div class="admonition-body"><p>When using a refraction algorithm like <a href="#SolarPosition.Refraction.HUGHES"><code>HUGHES</code></a>, the <a href="../reference/#SolarPosition.Positioning.solar_position"><code>solar_position</code></a> function returns an <a href="../reference/#SolarPosition.Positioning.ApparentSolPos"><code>ApparentSolPos</code></a> struct containing both true and apparent angles.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.NoRefraction" id="SolarPosition.Refraction.NoRefraction"><code>SolarPosition.Refraction.NoRefraction</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct NoRefraction &lt;: RefractionAlgorithm</code></pre><p>Indicates that no atmospheric refraction correction should be applied.</p><p>This is the default refraction setting for solar position calculations. When used, only basic solar position (azimuth, elevation, zenith) is computed.</p></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/Refraction.jl#L37-L44" target="_blank">source</a></section></article><div class="admonition is-info" id="Info-a48c84f01eaf3db"><header class="admonition-header">Info<a class="admonition-anchor" href="#Info-a48c84f01eaf3db" title="Permalink"></a></header><div class="admonition-body"><p>When using <a href="#SolarPosition.Refraction.NoRefraction"><code>NoRefraction</code></a> (the default), the <a href="../reference/#SolarPosition.Positioning.solar_position"><code>solar_position</code></a> function returns a <a href="../reference/#SolarPosition.Positioning.SolPos"><code>SolPos</code></a> struct containing only the true geometric angles (azimuth, elevation, zenith). In this case, no refraction correction is applied.</p></div></div><h2 id="Default-refraction-model"><a class="docs-heading-anchor" href="#Default-refraction-model">Default refraction model</a><a id="Default-refraction-model-1"></a><a class="docs-heading-anchor-permalink" href="#Default-refraction-model" title="Permalink"></a></h2><p>The <a href="#SolarPosition.Refraction.DefaultRefraction"><code>DefaultRefraction</code></a> type is a special marker that indicates to use the default refraction behavior for the selected solar position algorithm. For most algorithms, this means no refraction correction (i.e., equivalent to <a href="#SolarPosition.Refraction.NoRefraction"><code>NoRefraction</code></a>).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.DefaultRefraction" id="SolarPosition.Refraction.DefaultRefraction"><code>SolarPosition.Refraction.DefaultRefraction</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DefaultRefraction &lt;: RefractionAlgorithm</code></pre><p>Default refraction model used when no specific model is provided.</p><p>This will depend on the solar position algorithm being used.</p></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/Refraction.jl#L47-L53" target="_blank">source</a></section></article><h2 id="Comparison-of-Refraction-Models"><a class="docs-heading-anchor" href="#Comparison-of-Refraction-Models">Comparison of Refraction Models</a><a id="Comparison-of-Refraction-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Comparison-of-Refraction-Models" title="Permalink"></a></h2><p>Several different refraction models have been proposed in the literature. <code>SolarPosition.jl</code> only implements a subset of them but PRs are always welcome! To compare the different refraction models, the refraction angle is calculated in the range -1 to 90 degree solar elevation in steps of 0.1 degrees.</p><pre><code class="language-julia hljs">using SolarPosition
using CairoMakie

# Define models and elevation range
models = [("Archer", SolarPosition.Refraction.ARCHER()), ("Bennett", SolarPosition.Refraction.BENNETT()),
          ("Hughes", SolarPosition.Refraction.HUGHES()), ("Michalsky", SolarPosition.Refraction.MICHALSKY()),
          ("SG2", SolarPosition.Refraction.SG2()), ("SPA", SolarPosition.Refraction.SPARefraction())]
elevation = -1.5:0.1:90.0

# Create figure with two subplots
fig = Figure(size = (800, 400), backgroundcolor = :transparent, textcolor = "#f5ab35")
ax1 = Axis(fig[1, 1], xlabel = "True elevation [degrees]",
    ylabel = "Refraction correction [degrees]", title = "Near Horizon",
    backgroundcolor = :transparent, xticks = -1:1:4)
ax2 = Axis(fig[1, 2], xlabel = "True elevation [degrees]",
    ylabel = "Refraction correction [degrees]", title = "Full Range (Log Scale)", yscale = log10, backgroundcolor = :transparent)

# Plot refraction for each model
for (name, model) in models
    ref = [SolarPosition.Refraction.refraction(model, e) for e in elevation]
    lines!(ax1, elevation, ref, label = name)
    mask = ref .&gt; 0
    lines!(ax2, elevation[mask], ref[mask])
end

xlims!(ax1, -1.5, 4); ylims!(ax1, 0, 1.0)
xlims!(ax2, -1.5, 90); ylims!(ax2, 1e-3, 1.0)

Legend(fig[0, :], ax1, orientation = :horizontal, framevisible = false,
    tellwidth = false, tellheight = true, nbanks = 1)
fig</code></pre><img alt="Example block output" src="454d9c4e.png"/><p>A comparison of the refraction models is visualized above. The plot on the left shows refraction for solar elevation angles near sunrise/sunset, where refraction is most significant. The plot on the right shows the refraction angles for the entire range of solar elevation angles. Note that for the right plot, the y-axis is a log scale, which emphasizes the difference between the models.</p><h2 id="hughes-refraction"><a class="docs-heading-anchor" href="#hughes-refraction">Hughes</a><a id="hughes-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#hughes-refraction" title="Permalink"></a></h2><p>The Hughes refraction model accounts for atmospheric pressure and temperature effects.</p><p>This model was developed by [<a href="../literature/#Hug85">Hug85</a>] and is used in the SUNAEP software [<a href="../literature/#Zim81">Zim81</a>]. It's also the basis for the refraction correction in NOAA's solar position calculator (using fixed pressure of 101325 Pa and temperature of 10°C).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.HUGHES" id="SolarPosition.Refraction.HUGHES"><code>SolarPosition.Refraction.HUGHES</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct HUGHES{T} &lt;: RefractionAlgorithm</code></pre><p>Hughes refraction model.</p><p>This function was developed by G. Hughes [1] and was used in the SUNAEP software [2].</p><p>It is also used to calculate the refraction correction in the NOAA solar position algorithm using a fixed pressure of 101325 Pa and a temperature of 10 degrees Celsius.</p><p><strong>Fields</strong></p><ul><li><p><code>pressure::Any</code>: Annual average atmospheric pressure [Pascal]</p></li><li><p><code>temperature::Any</code>: Annual average temperature [°C]</p></li></ul><p><strong>Constructor</strong></p><ul><li><code>HUGHES()</code>: Uses default parameters: pressure = 101325 Pa, temperature = 12 °C</li><li><code>HUGHES(pressure, temperature)</code>: Specify custom pressure [Pa] and temperature [°C]</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p>For 5° &lt; elevation ≤ 90°:</p><p class="math-container">\[\frac{58.1}{\tan(el)} - \frac{0.07}{\tan(el)^3} + \frac{8.6 \times 10^{-5}}{\tan(el)^5}\]</p><p>For -0.575° &lt; elevation ≤ 5°:</p><p class="math-container">\[el \cdot (-518.2 + el \cdot (103.4 + el \cdot (-12.79 + el \cdot 0.711))) + 1735\]</p><p>For elevation ≤ -0.575°:</p><p class="math-container">\[\frac{-20.774}{\tan(el)}\]</p><p>where <code>el</code> is the true (unrefracted) solar elevation angle.</p><p>The result is then corrected for temperature and pressure:</p><p class="math-container">\[\text{Refract} \times \frac{283}{273 + T} \times \frac{P}{101325} \times \frac{1}{3600}\]</p><p><strong>Literature</strong></p><p>This function was developed by [<a href="../literature/#Hug85">Hug85</a>] and was used in the SUNAEP software [<a href="../literature/#Zim81">Zim81</a>]. It is also used to calculate the refraction correction in the NOAA solar position algorithm using a fixed pressure of 101325 Pa and a temperature of 10 degrees Celsius.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create Hughes refraction model with default parameters
hughes = HUGHES()

# Or specify custom atmospheric conditions
hughes_custom = HUGHES(101325.0, 25.0)  # 25°C temperature

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(hughes, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/hughes.jl#L1-L65" target="_blank">source</a></section></article><h2 id="archer-refraction"><a class="docs-heading-anchor" href="#archer-refraction">Archer</a><a id="archer-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#archer-refraction" title="Permalink"></a></h2><p>The Archer refraction model is a cosine-based correction that does not require atmospheric parameters.</p><p>This simplified model from [<a href="../literature/#Arc80">ABO80</a>] computes refraction based on the zenith angle using trigonometric relationships. It's useful when atmospheric data is not available.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.ARCHER" id="SolarPosition.Refraction.ARCHER"><code>SolarPosition.Refraction.ARCHER</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ARCHER &lt;: RefractionAlgorithm</code></pre><p>Archer refraction model.</p><p>Atmospheric refraction correction based on the Archer algorithm.</p><p>This function calculates the atmospheric refraction correction of the solar elevation angle using the method described by Archer [1]. The method was originally developed to be used with the Walraven solar position algorithm [2].</p><p><strong>Fields</strong></p><p><strong>Constructor</strong></p><ul><li><code>ARCHER()</code>: Creates an Archer refraction model instance</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p class="math-container">\[\begin{aligned}
C &amp;= \cos(Z) + 0.0083 \cdot \left(\frac{1}{0.955 + (20.267 \cdot \cos(Z))} - 0.047121 \right)\\
Z_a &amp;= \arccos(C)\\
\text{refraction} &amp;= Z - Z_a
\end{aligned}\]</p><p>where <span>$Z$</span> is the true solar zenith angle and <span>$Z_a$</span> is the apparent zenith angle.</p><p><strong>Literature</strong></p><p>This method was described by [<a href="../literature/#Arc80">ABO80</a>] and was originally developed to be used with the Walraven solar position algorithm [<a href="../literature/#Wal78">Wal78</a>].</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create Archer refraction model
archer = ARCHER()

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(archer, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/archer.jl#L1-L47" target="_blank">source</a></section></article><h2 id="bennett-refraction"><a class="docs-heading-anchor" href="#bennett-refraction">Bennett</a><a id="bennett-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#bennett-refraction" title="Permalink"></a></h2><p>The Bennett refraction model is widely used in marine navigation and accounts for atmospheric conditions.</p><p>Developed by [<a href="../literature/#Ben82">Ben82</a>], this model provides accurate refraction corrections with adjustments for atmospheric pressure and temperature. It's particularly effective for low elevation angles.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.BENNETT" id="SolarPosition.Refraction.BENNETT"><code>SolarPosition.Refraction.BENNETT</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct BENNETT{T} &lt;: RefractionAlgorithm</code></pre><p>Bennett refraction model.</p><p>Atmospheric refraction correction based on the Bennett algorithm.</p><p>Calculation of atmospheric refraction correction of the solar elevation angle using the method developed by Bennett [1].</p><p><strong>Fields</strong></p><ul><li><p><code>pressure::Any</code>: Annual average atmospheric pressure [Pascal]</p></li><li><p><code>temperature::Any</code>: Annual average temperature [°C]</p></li></ul><p><strong>Constructor</strong></p><ul><li><code>BENNETT()</code>: Uses default parameters: pressure = 101325 Pa, temperature = 12 °C</li><li><code>BENNETT(pressure, temperature)</code>: Specify custom pressure [Pa] and temperature [°C]</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p class="math-container">\[\text{ref} = \frac{0.28 \cdot P}{T+273} \cdot \frac{0.016667}{\tan(el + 7.31 / (el+4.4))}\]</p><p>where <span>$P$</span> is the local air pressure in hPa, <span>$T$</span> is the local air temperature in °C, and <span>$el$</span> is the true (uncorrected) solar elevation angle.</p><p><strong>Literature</strong></p><p>This method was described by [<a href="../literature/#Ben82">Ben82</a>].</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create Bennett refraction model with default parameters
bennett = BENNETT()

# Or specify custom atmospheric conditions
bennett_custom = BENNETT(101325.0, 25.0)  # 25°C temperature

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(bennett, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/bennett.jl#L1-L46" target="_blank">source</a></section></article><h2 id="michalsky-refraction"><a class="docs-heading-anchor" href="#michalsky-refraction">Michalsky</a><a id="michalsky-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#michalsky-refraction" title="Permalink"></a></h2><p>The Michalsky refraction model uses a rational polynomial approximation.</p><p>From [<a href="../literature/#Mic88">Mic88</a>], this algorithm is part of the Astronomical Almanac's method for approximate solar position calculations. It includes special handling for very low elevation angles.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.MICHALSKY" id="SolarPosition.Refraction.MICHALSKY"><code>SolarPosition.Refraction.MICHALSKY</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct MICHALSKY &lt;: RefractionAlgorithm</code></pre><p>Michalsky refraction model.</p><p>Atmospheric refraction correction based on the Michalsky algorithm.</p><p>This function calculates the atmospheric refraction correction of the solar elevation angle using the method described by Michalsky [1].</p><p><strong>Fields</strong></p><p><strong>Constructor</strong></p><ul><li><code>MICHALSKY()</code>: Creates a Michalsky refraction model instance</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p class="math-container">\[\text{ref} = \frac{3.51561 \cdot (0.1594 + 0.0196 \cdot el + 0.00002 \cdot el^2)}{1 + 0.505 \cdot el + 0.0845 \cdot el^2}\]</p><p>where <span>$el$</span> is the true (uncorrected) solar elevation angle.</p><p>Note that 3.51561 = 1013.2 mb / 288.2 °C.</p><p>For elevation angles below -0.56°, the refraction correction is clamped to 0.56°.</p><p><strong>Literature</strong></p><p>This method was described by [<a href="../literature/#Mic88">Mic88</a>].</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create Michalsky refraction model
michalsky = MICHALSKY()

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(michalsky, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/michalsky.jl#L1-L45" target="_blank">source</a></section></article><h2 id="sg2-refraction"><a class="docs-heading-anchor" href="#sg2-refraction">SG2</a><a id="sg2-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#sg2-refraction" title="Permalink"></a></h2><p>The SG2 (Second Generation) refraction algorithm is optimized for fast computation over multi-decadal periods.</p><p>Developed by [<a href="../literature/#BW12">BW12</a>], this algorithm uses a two-regime approach with different formulas for elevations above and below a threshold. It accounts for atmospheric pressure and temperature.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.SG2" id="SolarPosition.Refraction.SG2"><code>SolarPosition.Refraction.SG2</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SG2{T} &lt;: RefractionAlgorithm</code></pre><p>SG2 refraction model.</p><p>Atmospheric refraction correction based on the algorithm in SG2.</p><p>This function calculates the atmospheric refraction correction of the solar elevation angle using the method developed by Ph. Blanc and L. Wald [1].</p><p><strong>Fields</strong></p><ul><li><p><code>pressure::Any</code>: Annual average atmospheric pressure [Pascal]</p></li><li><p><code>temperature::Any</code>: Annual average temperature [°C]</p></li></ul><p><strong>Constructor</strong></p><ul><li><code>SG2()</code>: Uses default parameters: pressure = 101325 Pa, temperature = 12 °C</li><li><code>SG2(pressure, temperature)</code>: Specify custom pressure [Pa] and temperature [°C]</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p>For <span>$el &gt; -0.01$</span> radians:</p><p class="math-container">\[\frac{P}{1010} \cdot \frac{283}{273+T} \cdot \frac{2.96706 \times 10^{-4}}{\tan(el+0.0031376 \cdot (el+0.089186)^{-1})}\]</p><p>For <span>$el \leq -0.01$</span> radians:</p><p class="math-container">\[-\frac{P}{1010} \cdot \frac{283}{273+T} \cdot \frac{1.005516 \times 10^{-4}}{\tan(el)}\]</p><p>where <span>$el$</span> is the true solar elevation angle, <span>$P$</span> is the local air pressure in hPa, and <span>$T$</span> is the local air temperature in °C.</p><p><strong>Literature</strong></p><p>This method was described by [<a href="../literature/#BW12">BW12</a>].</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create SG2 refraction model with default parameters
sg2 = SG2()

# Or specify custom atmospheric conditions
sg2_custom = SG2(101325.0, 25.0)  # 25°C temperature

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(sg2, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/sg2.jl#L1-L52" target="_blank">source</a></section></article><h2 id="spa-refraction"><a class="docs-heading-anchor" href="#spa-refraction">SPARefraction</a><a id="spa-refraction-1"></a><a class="docs-heading-anchor-permalink" href="#spa-refraction" title="Permalink"></a></h2><p>The SPARefraction (Solar Position Algorithm) refraction model is part of NREL's high-accuracy solar position algorithm.</p><p>From [<a href="../literature/#RA04">RA04</a>], this is the refraction correction used in NREL's SPA algorithm, which is accurate to ±0.0003° over the years -2000 to 6000. It includes a configurable refraction limit for below-horizon calculations.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" href="#SolarPosition.Refraction.SPARefraction" id="SolarPosition.Refraction.SPARefraction"><code>SolarPosition.Refraction.SPARefraction</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SPARefraction{T} &lt;: RefractionAlgorithm</code></pre><p>SPARefraction - SPA (Solar Position Algorithm) refraction model.</p><p>Atmospheric refraction correction from the SPA algorithm.</p><p>This function calculates the atmospheric refraction correction of the solar elevation angle using the method described in Reda and Andreas's [1] Solar Position Algorithm (SPA).</p><p><strong>Fields</strong></p><ul><li><p><code>pressure::Any</code>: Annual average atmospheric pressure [Pascal]</p></li><li><p><code>temperature::Any</code>: Annual average temperature [°C]</p></li><li><p><code>refraction_limit::Any</code>: Minimum elevation angle for refraction correction [degrees]</p></li></ul><p><strong>Constructor</strong></p><ul><li><code>SPARefraction()</code>: Uses default parameters: pressure = 101325 Pa, temperature = 12 °C, refraction_limit = -0.5667°</li><li><code>SPARefraction(pressure, temperature)</code>: Specify custom pressure [Pa] and temperature [°C], uses default refraction_limit</li><li><code>SPARefraction(pressure, temperature, refraction_limit)</code>: Also specify refraction limit [degrees]</li></ul><p><strong>Notes</strong></p><p>The equation to calculate the refraction correction is given by:</p><p class="math-container">\[\text{ref} = \frac{P}{1010} \cdot \frac{283}{273 + T} \cdot \frac{1.02}{60 \cdot \tan(el + 10.3/(el + 5.11))}\]</p><p>where <span>$el$</span> is the true solar elevation angle, <span>$P$</span> is the annual average local air pressure in hPa/mbar, and <span>$T$</span> is the annual average local air temperature in °C.</p><p>The refraction limit parameter determines the solar elevation angle below which refraction is not applied, as the sun is assumed to be below horizon. Note that the sun diameter (0.26667°) is added to this limit.</p><p><strong>Literature</strong></p><p>This method was described by [<a href="../literature/#RA04">RA04</a>].</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using SolarPosition

# Create SPARefraction model with default parameters
spa = SPARefraction()

# Or specify custom atmospheric conditions
spa_custom = SPARefraction(101325.0, 25.0)  # 25°C temperature

# With custom refraction limit
spa_limit = SPARefraction(101325.0, 12.0, -1.0)  # Don't correct below -1°

# Apply refraction correction to elevation angle
elevation = 30.0  # degrees
refraction_correction = refraction(spa, elevation)
apparent_elevation = elevation + refraction_correction</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SolarPosition.jl/blob/9987ae70b82844cfe44cd3817c844cc2dacfcd38/src/Refraction/spa.jl#L1-L55" target="_blank">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../positioning/">« Solar Positioning</a><a class="docs-footer-nextpage" href="../deltat/">Delta T (ΔT) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Friday 31 October 2025 20:55">Friday 31 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>