<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Parameters · SpectralFitting.jl</title><meta content="Parameters · SpectralFitting.jl" name="title"/><meta content="Parameters · SpectralFitting.jl" property="og:title"/><meta content="Parameters · SpectralFitting.jl" property="twitter:title"/><meta content="Documentation for SpectralFitting.jl." name="description"/><meta content="Documentation for SpectralFitting.jl." property="og:description"/><meta content="Documentation for SpectralFitting.jl." property="twitter:description"/><script data-outdated-warner="" src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="catppuccin-mocha" href="../assets/themes/catppuccin-mocha.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-macchiato" href="../assets/themes/catppuccin-macchiato.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-frappe" href="../assets/themes/catppuccin-frappe.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="catppuccin-latte" href="../assets/themes/catppuccin-latte.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="https://JuliaAstro.org/SpectralFitting/stable/parameters/" rel="canonical"/><link href="../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><a class="brand" href="../../.."><img alt="home" src="../../../assets/logo.svg"/></a><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../../home/">Home</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Domain</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Solar System</div><ul class="column-content"><a class="nav-link nav-item" href="../../../CALCEPH/">⬤ CALCEPH</a><a class="nav-link nav-item" href="https://juliaastro.org/EphemerisSources.jl" target="_blank">⬤ EphemerisSources</a><a class="nav-link nav-item" href="https://juliaastro.org/GeneralAstrodynamics.jl" target="_blank">⬤ GeneralAstrodynamics</a><a class="nav-link nav-item" href="https://github.com/PerezHz/HORIZONS.jl?tab=readme-ov-file#horizonsjl" target="_blank">⬤ HORIZONS</a><a class="nav-link nav-item" href="https://juliaspace.github.io/SatelliteToolbox.jl/stable/" target="_blank">⬤ SatelliteToolbox</a><a class="nav-link nav-item" href="../../../SolarPosition/">⬤ SolarPosition</a><a class="nav-link nav-item" href="../../../SPICE/">⬤ SPICE</a></ul></div><div class="nav-mega-column"><div class="column-header">Exoplanets</div><ul class="column-content"><a class="nav-link nav-item" href="http://JuliaHCI.github.io/ADI.jl/stable/" target="_blank">⬤ ADI</a><a class="nav-link nav-item" href="http://JuliaHCI.github.io/HCIToolbox.jl/stable/" target="_blank">⬤ HCIToolbox</a><a class="nav-link nav-item" href="../../../Orbits/">⬤ Orbits</a><a class="nav-link nav-item" href="https://sefffal.github.io/PlanetOrbits.jl/dev/" target="_blank">⬤ PlanetOrbits</a><a class="nav-link nav-item" href="../../../Transits/">⬤ Transits</a></ul></div><div class="nav-mega-column"><div class="column-header">Stars</div><ul class="column-content"><a class="nav-link nav-item" href="https://cgarling.github.io/BolometricCorrections.jl/stable/" target="_blank">⬤ BolometricCorrections</a><a class="nav-link nav-item" href="https://cgarling.github.io/InitialMassFunctions.jl/stable/" target="_blank">⬤ InitialMassFunctions</a><a class="nav-link nav-item" href="https://cgarling.github.io/StarFormationHistories.jl/stable/" target="_blank">⬤ StarFormationHistories</a></ul></div><div class="nav-mega-column"><div class="column-header">Galaxies and Cosmology</div><ul class="column-content"><a class="nav-link nav-item" href="../../../Cosmology/">⬤ Cosmology</a><a class="nav-link nav-item" href="../../../DustExtinction/">⬤ DustExtinction</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/ScatteringOptics.jl/stable/" target="_blank">⬤ ScatteringOptics</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Techniques</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Photometry</div><ul class="column-content"><a class="nav-link nav-item" href="../../../CCDReduction/">⬤ CCDReduction</a><a class="nav-link nav-item" href="../../../LACosmic/">⬤ LACosmic</a><a class="nav-link nav-item" href="../../../Photometry/">⬤ Photometry</a><a class="nav-link nav-item" href="../../../PhotometricFilters/">⬤ PhotometricFilters</a><a class="nav-link nav-item" href="../../../PSFModels/">⬤ PSFModels</a><a class="nav-link nav-item" href="../../../SAOImageDS9/">⬤ SAOImageDS9</a></ul></div><div class="nav-mega-column"><div class="column-header">Astrometry</div><ul class="column-content"><a class="nav-link nav-item" href="https://barrettp.github.io/Astrometry/dev" target="_blank">⬤ Astrometry</a><a class="nav-link nav-item" href="../../../AstroTime/">⬤ AstroTime</a><a class="nav-link nav-item" href="../../../EarthOrientation/">⬤ EarthOrientation</a><a class="nav-link nav-item" href="../../../ERFA/">◯ ERFA</a><a class="nav-link nav-item" href="../../../Healpix/">⬤ Healpix</a><a class="nav-link nav-item" href="../../../Reproject/">⬤ Reproject</a><a class="nav-link nav-item" href="../../../SkyCoords/">⬤ SkyCoords</a><a class="nav-link nav-item" href="../../../WCS/">◯ WCS</a></ul></div><div class="nav-mega-column"><div class="column-header">Spectroscopy</div><ul class="column-content"><a class="nav-link nav-item" href="https://ajwheeler.github.io/Korg.jl/stable/" target="_blank">⬤ Korg</a><a class="nav-link nav-item" href="../../../Spectra/">⬤ Spectra</a><a class="nav-link active nav-item" href="../../">⬤ SpectralFitting</a></ul></div><div class="nav-mega-column"><div class="column-header">Time Series Analysis</div><ul class="column-content"><a class="nav-link nav-item" href="https://docs.juliadsp.org/stable/" target="_blank">⬤ DSP</a><a class="nav-link nav-item" href="../../../LombScargle/">⬤ LombScargle</a><a class="nav-link nav-item" href="https://juliastats.github.io/TimeSeries.jl/stable" target="_blank">⬤ TimeSeries</a></ul></div><div class="nav-mega-column"><div class="column-header">Interferometry</div><ul class="column-content"><a class="nav-link nav-item" href="https://ptiede.github.io/Comrade.jl/stable/" target="_blank">⬤ Comrade</a><a class="nav-link nav-item" href="https://aplavin.github.io/Difmap.jl/test/examples.html" target="_blank">⬤ Difmap</a><a class="nav-link nav-item" href="https://github.com/emmt/OIFITS.jl?tab=readme-ov-file#support-for-oi-fits-data-in-julia" target="_blank">⬤ OIFITS</a><a class="nav-link nav-item" href="https://fabienbaron.github.io/OITOOLS.jl/dev" target="_blank">⬤ OITOOLS</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/PolarizedTypes.jl/stable/" target="_blank">⬤ PolarizedTypes</a><a class="nav-link nav-item" href="https://aplavin.github.io/VLBIData.jl/test/examples.html" target="_blank">⬤ VLBIData</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/VLBISkyModels.jl/stable/" target="_blank">⬤ VLBISkyModels</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Statistics</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Uncertainty</div><ul class="column-content"><a class="nav-link nav-item" href="https://juliaphysics.github.io/Measurements.jl/stable/" target="_blank">⬤ Measurements</a><a class="nav-link nav-item" href="https://baggepinnen.github.io/MonteCarloMeasurements.jl/stable/" target="_blank">⬤ MonteCarloMeasurements</a><a class="nav-link nav-item" href="https://baggepinnen.github.io/MonteCarloMeasurements.jl/stable/" target="_blank">⬤ Uncertain</a></ul></div><div class="nav-mega-column"><div class="column-header">Optimization</div><ul class="column-content"><a class="nav-link nav-item" href="../../../BoxLeastSquares/">⬤ BoxLeastSquares</a><a class="nav-link nav-item" href="http://jump.dev/JuMP.jl/" target="_blank">⬤ JuMP</a><a class="nav-link nav-item" href="https://docs.sciml.ai/NonlinearSolve/stable/" target="_blank">⬤ NonlinearSolve</a><a class="nav-link nav-item" href="https://docs.sciml.ai/Optimization/stable/" target="_blank">⬤ Optimization</a></ul></div><div class="nav-mega-column"><div class="column-header">General</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroLib/">⬤ AstroLib</a><a class="nav-link nav-item" href="http://mileslucas.com/BiweightStats.jl/stable/" target="_blank">⬤ BiweightStats</a><a class="nav-link nav-item" href="https://github.com/jeff-regier/Celeste.jl/wiki/" target="_blank">⬤ Celeste</a><a class="nav-link nav-item" href="https://juliastats.org/" target="_blank">⬤ JuliaStats</a><a class="nav-link nav-item" href="https://juliastats.github.io/Distributions.jl/stable/" target="_blank">⬤ Distributions</a><a class="nav-link nav-item" href="https://ehtjulia.github.io/FastHartleyTransform.jl/stable/" target="_blank">⬤ FastHartleyTransform</a><a class="nav-link nav-item" href="https://sefffal.github.io/Octofitter.jl/dev" target="_blank">⬤ Octofitter</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Utilities</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Data I/O</div><ul class="column-content"><a class="nav-link nav-item" href="../../../ASDF2/">⬤ ASDF2</a><a class="nav-link nav-item" href="../../../AstroImages/">⬤ AstroImages</a><a class="nav-link nav-item" href="../../../CFITSIO/">◯ CFITSIO</a><a class="nav-link nav-item" href="https://emmt.github.io/EasyFITS.jl/dev" target="_blank">⬤ EasyFITS</a><a class="nav-link nav-item" href="../../../FITSFiles/">⬤ FITSFiles</a><a class="nav-link nav-item" href="../../../FITSIO/">◯ FITSIO</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/FixedWidthTables.jl?tab=readme-ov-file#fixedwidthtablesjl" target="_blank">⬤ FixedWidthTables</a><a class="nav-link nav-item" href="https://aplavin.github.io/SkyImages.jl/test/notebook.html" target="_blank">⬤ SkyImages</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/VirtualObservatory.jl?tab=readme-ov-file#virtualobservatoryjl" target="_blank">⬤ VirtualObservatory</a><a class="nav-link nav-item" href="https://github.com/JuliaAPlavin/VOTables.jl" target="_blank">⬤ VOTables</a><a class="nav-link nav-item" href="../../../XPA/">⬤ XPA</a></ul></div><div class="nav-mega-column"><div class="column-header">Data processing</div><ul class="column-content"><a class="nav-link nav-item" href="../../../Astroalign/">⬤ Astroalign</a><a class="nav-link nav-item" href="../../../BackgroundMeshes/">⬤ BackgroundMeshes</a><a class="nav-link nav-item" href="https://github.com/torrance/Casacore.jl?tab=readme-ov-file#casacorejl" target="_blank">⬤ Casacore</a><a class="nav-link nav-item" href="https://dataframes.juliadata.org/stable/" target="_blank">⬤ DataFrames</a><a class="nav-link nav-item" href="https://rafaqz.github.io/DimensionalData.jl/stable/" target="_blank">⬤ DimensionalData</a><a class="nav-link nav-item" href="https://aplavin.github.io/FlexiJoins.jl/test/examples.html" target="_blank">⬤ FlexiJoins</a><a class="nav-link nav-item" href="https://github.com/gcalderone/SortMerge.jl?tab=readme-ov-file#sortmerge" target="_blank">⬤ SortMerge</a></ul></div><div class="nav-mega-column"><div class="column-header">Data Viz</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroImages/">⬤ AstroImages</a><a class="nav-link nav-item" href="https://juliaimages.github.io/ImageFiltering.jl/stable" target="_blank">⬤ ImageFiltering</a><a class="nav-link nav-item" href="https://manuelbehrendt.github.io/Mera.jl/stable/" target="_blank">⬤ Mera</a><a class="nav-link nav-item" href="https://sefffal.github.io/PairPlots.jl/dev/" target="_blank">⬤ PairPlots</a><a class="nav-link nav-item" href="https://aplavin.github.io/SkyImages.jl/test/notebook.html" target="_blank">⬤ SkyImages</a></ul></div><div class="nav-mega-column"><div class="column-header">Units/Constants</div><ul class="column-content"><a class="nav-link nav-item" href="../../../AstroAngles/">⬤ AstroAngles</a><a class="nav-link nav-item" href="https://symbolicml.org/DynamicQuantities.jl/stable/" target="_blank">⬤ DynamicQuantities</a><a class="nav-link nav-item" href="https://juliaphysics.github.io/PhysicalConstants.jl/stable/" target="_blank">⬤ PhysicalConstants</a><a class="nav-link nav-item" href="https://painterqubits.github.io/Unitful.jl/stable" target="_blank">⬤ Unitful</a><a class="nav-link nav-item" href="../../../UnitfulAstro/">⬤ UnitfulAstro</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search everywhere..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img alt="SpectralFitting.jl logo" src="../assets/logo.svg"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">SpectralFitting.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../walkthrough/">Walkthrough</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examples/">Diverse examples</a></li><li><a class="tocitem" href="../examples/sherpa-example/">A quick guide</a></li></ul></li><li><span class="tocitem">Fitting</span><ul><li class="is-active"><a class="tocitem" href="">Parameters</a><ul class="internal"><li><a class="tocitem" href="#Parameter-binding"><span>Parameter binding</span></a></li><li><a class="tocitem" href="#Parameter-patching"><span>Parameter patching</span></a></li></ul></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../models/using-models/">Using models</a></li><li><a class="tocitem" href="../models/models/">Model index</a></li><li><a class="tocitem" href="../models/composite-models/">Composite models</a></li><li><a class="tocitem" href="../models/wrapper-models/">Wrapper models</a></li><li><a class="tocitem" href="../models/surrogate-models/">Surrogate models</a></li><li><a class="tocitem" href="../models/xspec-models/">XSPEC models</a></li></ul></li><li><span class="tocitem">Datasets</span><ul><li><a class="tocitem" href="../datasets/datasets/">Using datasets</a></li><li><a class="tocitem" href="../datasets/mission-support/">Mission support</a></li></ul></li><li><a class="tocitem" href="../why-and-how/">Why &amp; How</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Fitting</a></li><li class="is-active"><a href="">Parameters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Parameters</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAstro/SpectralFitting.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAstro/SpectralFitting.jl/blob/main/docs/src/parameters.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" href="javascript:;" id="documenter-article-toggle-button" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Parameters"><a class="docs-heading-anchor" href="#Parameters">Parameters</a><a id="Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Parameters" title="Permalink"></a></h1><p>One of the core interface that SpectralFitting.jl provides are the model abstractions, and a method for controlling their <em>parameters</em>. Models are defined with a generic field type, so that they can be converted to primative types (e.g. Float64 or Float32) during evaluation. But whilst defining a model or a problem, the field type of all parameters is <a href="#SpectralFitting.FitParam"><code>FitParam</code></a>.</p><article><details class="docstring" open="true"><summary id="SpectralFitting.FitParam"><a class="docstring-binding" href="#SpectralFitting.FitParam"><code>SpectralFitting.FitParam</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FitParam(
    value;
    # default error is 10%
    error = 0.1 * value,
    frozen = false,
    lower_limit = 0,
    upper_limit = Inf
)</code></pre><p>A parameter of an <a href="../models/using-models/#SpectralFitting.AbstractSpectralModel"><code>AbstractSpectralModel</code></a>. The fittable parameter can be used to control how a model will be invoked during fit, e.g. what rangers a parameter can take, whether they should be fronze, and so forth.</p><div class="admonition is-info" id="Note-6b3fca6a8f429cf8"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-6b3fca6a8f429cf8" title="Permalink"></a></header><div class="admonition-body"><p>Be aware, not all fitting algorithms support "boxed" parameters, where the lower and upper limits are taken into account.</p></div></div><p>To link parameters together, see <a href="#SpectralFitting.bind!"><code>bind!</code></a> or <a href="../models/wrapper-models/#SpectralFitting.ParameterPatch"><code>ParameterPatch</code></a>.</p><p>Parameters can be modified in a model in the conventional way:</p><pre><code class="language-julia hljs">model = PowerLaw()

# set the value
model.K = 2.0
# set the error
model.K.error = 0.3
# set the lower bound
model.K.lower_limit = 1.0</code></pre><p>Accessing the values in a generic function should use <a href="@ref"><code>get_value</code></a>.</p><p>To iterate over all parameters of a model, use <a href="@ref"><code>parameter_vector</code></a>.</p><p><strong>Fields</strong></p><ul><li><p><code>value</code>: The value (i.e. mean) of the parameter.</p></li><li><p><code>error</code>: The absolute (±, or standard deviation) error on the parameter.</p></li><li><p><code>lower_limit</code>: The lower limit the parameter can take.</p></li><li><p><code>upper_limit</code>: The upper limit the parameter can take.</p></li><li><p><code>frozen</code>: Is this a frozen parameter during fits?</p></li><li><p><code>patched</code>: Is this parameter patched in some way?</p></li></ul><p>A <code>FitParam</code> is a fittable (or frozen) parameter of an <a href="../models/using-models/#SpectralFitting.AbstractSpectralModel"><code>AbstractSpectralModel</code></a>. Every model will instantiate with <code>FitParam</code> as their parameter types so that they may be modified, bounded, frozen, or otherwise, as desired before a fit is attempted.</p><p>The following methods should be preferred over direct field access for a <code>FitParam</code>:</p><ul><li><a href="@ref"><code>set_value!</code></a></li><li><a href="@ref"><code>get_value</code></a></li><li><a href="@ref"><code>get_error</code></a></li><li><a href="@ref"><code>get_lowerlimit</code></a></li><li><a href="@ref"><code>get_upperlimit</code></a></li><li><a href="@ref"><code>isfrozen</code></a></li><li><a href="@ref"><code>isfree</code></a></li></ul></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SpectralFitting.jl/blob/e83fbafcb10d79e59fbd3d8ac780f009568e0aa3/src/fitparam.jl#L6-L62" target="_blank">source</a></section></details></article><h2 id="Parameter-binding"><a class="docs-heading-anchor" href="#Parameter-binding">Parameter binding</a><a id="Parameter-binding-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-binding" title="Permalink"></a></h2><p>When performing a fit, it is desireable to <strong>bind</strong> certain parameters together. This ensures that they will have the same value; for example, if you were fitting two simultaneous datasets with two <a href="../models/models/#SpectralFitting.PowerLaw"><code>PowerLaw</code></a> models, you may want to have different normalisations of the model components, but enforce the power law index to be the same. To achieve this, SpectralFitting has the <a href="#SpectralFitting.bind!"><code>bind!</code></a> function that applies to your <a href="@ref"><code>FittingProblem</code></a>.</p><article><details class="docstring" open="true"><summary id="SpectralFitting.bind!"><a class="docstring-binding" href="#SpectralFitting.bind!"><code>SpectralFitting.bind!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">bind!(prob::FittingProblem, pairs[, pairs...])</code></pre><p>Bind parameters together within a <a href="@ref"><code>FittingProblem</code></a>. Parameters bound together will be mandated to have same value during the fit.</p><p>The binding must be specified in double or triple selector, which follow the format:</p><pre><code class="language-julia hljs">pair := (model_index, :component_name, :parameter_symbol)
     := (model_index, :parameter_symbol)</code></pre><p>The <code>model_index</code> is the index of the model in a multi-fit problem, i.e. <code>1</code>, <code>2</code>, and so on.</p><p>The component name is a <a href="../models/composite-models/#SpectralFitting.CompositeModel"><code>CompositeModel</code></a> model name, e.g. <code>:a1</code>, or <code>:c3</code>. This can be omitted if the model is not a <a href="../models/composite-models/#SpectralFitting.CompositeModel"><code>CompositeModel</code></a>.</p><p>The paramter symbol is a symbol representing the field of the parameter in the model. That is, <code>:K</code> or <code>:log10Flux</code>.</p><p>Bindings are specified using a chain of pairs <code>(root) =&gt; (target) [=&gt; (target)]</code>. The root parameter is kept as is, and all subsequent paramters are bound to the root. Multiple chains of pairs may be specified in a single call to <code>bind!</code>, or, alternatively, multiple bindings may be specified with successive calls to <code>bind!</code>.</p><p>Bindings can be inspected with <a href="@ref"><code>details</code></a>.</p><p>See also <a href="#SpectralFitting.bindall!"><code>bindall!</code></a>.</p><p><strong>Examples</strong></p><ul><li><p>Bind model 1's <code>K</code> parameter to model 2's second additive model's <code>K</code>:</p><pre><code class="language-julia hljs">bind!(prob, (1, :K) =&gt; (2, :a2, :K))</code></pre></li><li><p>Bind model 3's <code>:a2.K</code> parameter to model4's <code>:m3.L</code> and model 6's <code>:a1.a</code>:</p><pre><code class="language-julia hljs">bind!(prob, (3, :a2, :K) =&gt; (4, :m3, :K) =&gt; (6, :a1, :a))</code></pre></li></ul><p>Consider the following two models</p><pre><code class="language-julia hljs">model1 = PhotoelectricAbsorption() * (BlackBody() + PowerLaw())
model2 = PhotoelectricAbsorption() * (PowerLaw() + PowerLaw())

prob = FittingProblem(model1 =&gt; data1, model2 =&gt; data2)

# Bind the power law indices in the two models
bindall!(prob, :a)

# Bind the normalisation of powerlaws in the 2nd model:
bind!(prob, (2, :a1, :K) =&gt; (2, :a2, :K))

# To inspect the overall bindings.
details(prob)</code></pre><div class="admonition is-info" id="Note-aa269d6a1772d96b"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-aa269d6a1772d96b" title="Permalink"></a></header><div class="admonition-body"><p>Only free parameters can be bound together.</p></div></div></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SpectralFitting.jl/blob/e83fbafcb10d79e59fbd3d8ac780f009568e0aa3/src/fitting/problem.jl#L446-L512" target="_blank">source</a></section></details></article><article><details class="docstring" open="true"><summary id="SpectralFitting.bindall!"><a class="docstring-binding" href="#SpectralFitting.bindall!"><code>SpectralFitting.bindall!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">bindall!(prob::FittingProblem, item[, item...])</code></pre><p>Bind a common parameter across all models. The item is used to select the parameter to bind, and may either be a single symbol, or a model-symbol double.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># bind parameter `a` in all models
bindall!(prob, :a)

# bind parameter `K` in component `a3` in all models
bindall!(prob, (:a3, :K))

# multiple simultaneously
bindall!(prob, :E, (:a2, :K))</code></pre></div><a class="docs-sourcelink" href="https://github.com/JuliaAstro/SpectralFitting.jl/blob/e83fbafcb10d79e59fbd3d8ac780f009568e0aa3/src/fitting/problem.jl#L532-L550" target="_blank">source</a></section></details></article><div class="admonition is-info" id="Note-4f097187f004f0fa"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-4f097187f004f0fa" title="Permalink"></a></header><div class="admonition-body"><p>Bindings are treated not as specific to the model but specific to the <a href="@ref"><code>FittingProblem</code></a>. This is because you may want to use the same model for multiple different datasets, and have slightly different binding requirements for each one (e.g. depending on the instruments you are using). If you do need the same binding applied to two different problems, you can do that with</p><pre><code class="language-julia hljs">append!(prob1.bindings, prob2.bindings)</code></pre><p>Caution however, this will only make sense if you are using precisely the same model in both problems.</p></div></div><p>Let's try it out. We'll generate some arbitrary powerlaw spectra with different normalisations and fit them simultaneously.</p><pre><code class="language-julia hljs">using SpectralFitting, Plots

energy = collect(range(0.1, 10.0, 100))

# two different models with different normalisations
model1 = PowerLaw(K = FitParam(100.0), a = FitParam(1.2))
model2 = PowerLaw(K = FitParam(300.0), a = FitParam(2.0))

data1 = simulate(energy, model1, var = 1e-3, seed = 42)
data2 = simulate(energy, model2, var = 1e-3, seed = 42)

plot(data1, xscale = :log10, yscale = :log10)
plot!(data2, xscale = :log10, yscale = :log10)</code></pre><img alt="Example block output" src="79d7ab37.svg"/><p>Now we want to fit a single powerlaw model to both of these spectra simultaneously, but with the powerlaw index fixed to be the same in both models.</p><pre><code class="language-julia hljs">model = PowerLaw()
prob = FittingProblem(model =&gt; data1, model =&gt; data2)

bindall!(prob, :a)
prob</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ FittingProblem:
│   . Models     : 2
│   . Datasets   : 2
│   Parameter Summary:
│   . Total      : 4
│   . <span class="sgr36">Frozen</span>     : 0
│   . <span class="sgr36">Bound</span>      : 1
│   . <span class="sgr36">Free</span>       : 3
└ </code></pre><p>We can get a better look at our model configuration by using the <a href="@ref"><code>details</code></a> method:</p><pre><code class="language-julia hljs">details(prob)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Models:
│   <span class="sgr33">Model 1</span>: PowerLaw
│   K -&gt; 1 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│   a -&gt; 2 ± 0.2 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│
│   <span class="sgr33">Model 2</span>: PowerLaw
│   K -&gt; 1 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│   a -&gt; <span class="sgr35">Bound to Model 1 -&gt; a</span>
└</code></pre><p>In this printout we see that the <code>a</code> parameter of <code>Model 2</code> is bound to the <code>a</code> parameter of <code>Model 1</code>.</p><pre><code class="language-julia hljs">result = fit(prob, LevenbergMarquadt())

plot(data1, xscale = :log10, yscale = :log10)
plot!(data2, xscale = :log10, yscale = :log10)
plot!(result[1])
plot!(result[2])</code></pre><img alt="Example block output" src="1442b232.svg"/><p>Note that this fit is bad, because the underlying data have different power law indices, but our fit is required to enforce the models to have the same value. If we release this requirement, the fit will be much better, but the models will be entirely independent.</p><pre><code class="language-julia hljs">prob = FittingProblem(model =&gt; data1, model =&gt; data2)

result = SpectralFitting.fit(prob, LevenbergMarquadt())

plot(data1, xscale = :log10, yscale = :log10)
plot!(data2, xscale = :log10, yscale = :log10)
plot!(result[1])
plot!(result[2])</code></pre><img alt="Example block output" src="8f541a0e.svg"/><h2 id="Parameter-patching"><a class="docs-heading-anchor" href="#Parameter-patching">Parameter patching</a><a id="Parameter-patching-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-patching" title="Permalink"></a></h2><div class="admonition is-warning" id="Warning-d3ca149653d6cf92"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-d3ca149653d6cf92" title="Permalink"></a></header><div class="admonition-body"><p>The parameter patching interface is still experimental and will likely change in subsesquent versions of SpectralFitting.jl</p></div></div><p>Sometimes simply linking values is not sufficient, and you need to express a complex relationship between parameters. This is where <a href="../models/wrapper-models/#SpectralFitting.ParameterPatch"><code>ParameterPatch</code></a>, a type of <a href="../models/wrapper-models/#SpectralFitting.AbstractModelWrapper"><code>AbstractModelWrapper</code></a> is useful.</p><p>Consider the following</p><pre><code class="language-julia hljs">using SpectralFitting, Plots

real_model = GaussianLine(K = FitParam(2.0)) + GaussianLine(μ = FitParam(2.0), K = FitParam(4.0))
energy = collect(range(0.1, 10.0, 100))

data = simulate(energy, real_model; var = 4e-4, seed = 42)
plot(data)</code></pre><img alt="Example block output" src="9980b7e8.svg"/><p>We can fit this simple dataset quite easily, but suppose we wanted to constrain the solution to have the normalisation of one model component be exactly twice that of the other. To achieve this, we can use a patch:</p><pre><code class="language-julia hljs">function my_patch!(p)
    p.a2.K = p.a1.K * 2
end

# reset the parameters so the fit starts "fresh"
model = GaussianLine() + GaussianLine(μ = FitParam(3.0))

# Wrap the model with a parameter patch
patched_model = ParameterPatch(model; patch = my_patch!)
# be sure to freeze any parameter you are planning to overwrite in a patch
patched_model.a2.K.frozen = true

patched_model</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ ParameterPatch with 2 model components:
│    <span class="sgr36">a1 + a2</span>
│ Model key and parameters:
│ <span class="sgr36">    a1</span> =&gt; GaussianLine
│        K -&gt; 1   ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        μ -&gt; 6.4 ± 0.6 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        σ -&gt; 1   ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│ <span class="sgr36">    a2</span> =&gt; GaussianLine
│        K -&gt; 1                    <span class="sgr36">FROZEN</span><span class="sgr33">/PATCHED</span>
│        μ -&gt; 3 ± 0.3 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        σ -&gt; 1 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
└ </code></pre><p>This can then be fit as usual:</p><pre><code class="language-julia hljs">prob = FittingProblem(patched_model =&gt; data)
result = fit(prob, LevenbergMarquadt())

plot!(result)</code></pre><img alt="Example block output" src="e0992d11.svg"/><p>To apply the result with a parameter patch back on a model, use <a href="@ref"><code>update_model!</code></a> or <a href="../models/wrapper-models/#SpectralFitting.apply_patch!"><code>apply_patch!</code></a></p><pre><code class="language-julia hljs">update_model!(patched_model, result)
patched_model</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ ParameterPatch with 2 model components:
│    <span class="sgr36">a1 + a2</span>
│ Model key and parameters:
│ <span class="sgr36">    a1</span> =&gt; GaussianLine
│        K -&gt; 1.97 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        μ -&gt; 6.34 ± 0.6 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        σ -&gt; 1.05 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│ <span class="sgr36">    a2</span> =&gt; GaussianLine
│        K -&gt; 3.93                     <span class="sgr36">FROZEN</span><span class="sgr33">/PATCHED</span>
│        μ -&gt; 2.01  ± 0.3 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
│        σ -&gt; 0.961 ± 0.1 ∈ [ 0, Inf ] <span class="sgr32">FREE</span>
└ </code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/sherpa-example/">« A quick guide</a><a class="docs-footer-nextpage" href="../models/using-models/">Using models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 25 November 2025 15:04">Tuesday 25 November 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>